<!DOCTYPE html>
<html lang="he" dir="rtl">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <title>דרגה</title>
  <link rel="stylesheet" href="style.css" />
</head>
<body>

<header class="topbar">
  <div class="topbar-inner">
    <div class="brand-left">
      <div class="brand-logo">
        <img data-brand="logo" alt="לוגו">
        <span class="fallback" data-brand="logoFallback">LOGO</span>
      </div>
      <div class="brand-text">
        <h1 data-brand="groupName">המסע המשותף שלנו</h1>
        <div class="tagline" data-brand="tagline">חוברת הדרגות – מדריך וידאו לזכיין חדש</div>
      </div>
    </div>

    <div class="actions">
      <a class="btn ghost" href="index.html">חזרה</a>
      <a class="btn" href="booklet.html">חוברת להדפסה</a>
    </div>
  </div>
</header>

<main class="container">

  <section class="card">
    <h2 id="rankTitle" style="margin-top:0;">דרגה</h2>
    <p class="muted" id="rankIntro"></p>
  </section>

  <section class="card" id="videoCard">
    <h3 style="margin-top:0;">סרטון הדרכה</h3>
    <div class="video" id="videoBox"></div>
    <div class="muted small" id="videoLinkBox" style="margin-top:10px;"></div>
  </section>

  <section class="card">
    <h3 style="margin-top:0;">מה חשוב ללמוד בדרגה הזו</h3>
    <ul class="steps" id="learnList"></ul>
  </section>

</main>

<script src="brand-core.js"></script>
<script src="data.js"></script>
<script>
  const params = new URLSearchParams(location.search);
  const id = params.get("id") || "partner";
  const rank = getRankById(id);

  const titleEl = document.getElementById("rankTitle");
  const introEl = document.getElementById("rankIntro");
  const learnEl = document.getElementById("learnList");
  const videoBox = document.getElementById("videoBox");
  const videoCard = document.getElementById("videoCard");
  const videoLinkBox = document.getElementById("videoLinkBox");

  if (!rank) {
    titleEl.textContent = "לא נמצאה דרגה";
    introEl.textContent = "חזר/י לעמוד הבית ובחר/י דרגה מהרשימה.";
    videoCard.style.display = "none";
  } else {
    document.title = `דרגה: ${rank.title}`;
    titleEl.textContent = rank.title;
    introEl.textContent = rank.intro || "";

    learnEl.innerHTML = "";
    (rank.learn || []).forEach(t => {
      const li = document.createElement("li");
      li.textContent = t;
      learnEl.appendChild(li);
    });

    if (rank.video) {
      const embed = toYouTubeEmbed(rank.video);
      videoBox.innerHTML = `<iframe src="${embed}" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>`;
      videoLinkBox.innerHTML = `לינק לסרטון: <a href="${rank.video}" target="_blank" rel="noreferrer">${rank.video}</a>`;
    } else {
      videoCard.innerHTML = `<h3 style="margin-top:0;">סרטון הדרכה</h3><p class="muted">אין סרטון זמין לדרגה זו כרגע.</p>`;
    }
  }
</script>

</body>
</html>
