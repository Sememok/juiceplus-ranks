<!DOCTYPE html>
<html lang="he" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>××¤×ª ×“×¨×’×•×ª - ×’×¨×¡×” ×¡×•×¤×™×ª</title>
    <script src="https://d3js.org/d3.v7.min.js"></script>
    <style>
        :root { --primary: #16a34a; --bg: #f8fafc; --text: #1e293b; }
        body { margin: 0; font-family: 'Segoe UI', system-ui, sans-serif; background: var(--bg); color: var(--text); padding: 20px; padding-top: 80px; }
        
        /* ×¡×¨×’×œ ×¢×œ×™×•×Ÿ */
        .topbar { position: fixed; top: 0; left: 0; right: 0; height: 60px; background: white; display: flex; align-items: center; padding: 0 20px; box-shadow: 0 2px 10px rgba(0,0,0,0.05); z-index: 1000; border-bottom: 1px solid #e2e8f0; }
        .brand { font-weight: 800; font-size: 1.4rem; color: var(--primary); }

        /* ×›×¨×˜×™×¡×™× ×›×œ×œ×™×™× */
        .container { max-width: 1100px; margin: 0 auto; }
        .card { background: white; border-radius: 12px; padding: 25px; margin-bottom: 20px; box-shadow: 0 4px 6px -1px rgba(0,0,0,0.05); border: 1px solid #e2e8f0; }
        
        /* ×›×¤×ª×•×¨×™ × ×™×•×•×˜ */
        .nav-wrapper { overflow-x: auto; white-space: nowrap; padding-bottom: 10px; margin-bottom: 10px; }
        .nav-btn { display: inline-block; padding: 8px 20px; margin-left: 10px; background: white; border: 1px solid #cbd5e1; border-radius: 20px; cursor: pointer; font-weight: bold; color: #64748b; transition: 0.2s; }
        .nav-btn.active { background: var(--primary); color: white; border-color: var(--primary); }

        /* ××—×©×‘×•×Ÿ */
        .calc-box { background: #f0fdf4; border: 1px solid #bbf7d0; padding: 15px; border-radius: 10px; margin-top: 15px; }
        .calc-row { display: flex; gap: 10px; margin-top: 10px; }
        input, select { padding: 10px; border: 1px solid #cbd5e1; border-radius: 6px; flex: 1; }
        button.action-btn { background: var(--primary); color: white; border: none; padding: 0 20px; border-radius: 6px; font-weight: bold; cursor: pointer; }
        .calc-res { margin-top: 10px; font-weight: bold; color: #166534; display: none; padding-top: 10px; border-top: 1px dashed #86efac; }

        /* ×¢×¥ */
        .tree-container { overflow-x: auto; text-align: center; padding: 20px 0; min-height: 300px; }
        .math-summary { background: #fffbeb; border: 1px solid #fcd34d; color: #92400e; padding: 10px; text-align: center; font-weight: bold; border-radius: 8px; margin-top: 5px; }

        /* ×•×™×“××• */
        .video-box { position: relative; padding-bottom: 56.25%; height: 0; background: #000; border-radius: 10px; overflow: hidden; }
        .video-box iframe { position: absolute; top: 0; left: 0; width: 100%; height: 100%; border: 0; }

        @media print { .no-print { display: none; } }
    </style>
</head>
<body>

<div class="topbar">
    <div class="container" style="width:100%; display:flex; justify-content:space-between;">
        <div class="brand">Juice Plus+</div>
        <button class="nav-btn no-print" onclick="window.print()">ğŸ–¨ï¸ ×”×“×¤×¡</button>
    </div>
</div>

<div class="container">
    <div id="navMenu" class="nav-wrapper no-print"></div>

    <div class="card">
        <h1 id="rTitle" style="margin:0; color:#16a34a;">...</h1>
        <p id="rIntro" style="color:#64748b; font-size:1.1rem;">...</p>
        
        <div class="calc-box no-print">
            <div style="display:flex; justify-content:space-between;">
                <b>ğŸ§® ××—×©×‘×•×Ÿ ×™×¢×“</b>
                <span id="targetText">×™×¢×“: 0</span>
            </div>
            <div class="calc-row">
                <input type="number" id="currPoints" placeholder="× ×§×•×“×•×ª ×§×™×™××•×ª">
                <select id="packType">
                    <option value="380">×¤×™×¨×•×ª ×™×¢×¨ (380)</option>
                    <option value="765">×“×•××• (765)</option>
                    <option value="1145">×©×œ×™×©×™×™×” (1145)</option>
                    <option value="1631">×¨×‘×™×¢×™×™×” (1631)</option>
                    <option value="2561">×¢×¨×›×” ××œ××” (2561)</option>
                </select>
                <button class="action-btn" onclick="calculate()">×—×©×‘</button>
            </div>
            <div id="calcResult" class="calc-res"></div>
        </div>
    </div>

    <div class="card">
        <h3>×¡×¨×˜×•×Ÿ ×”×“×¨×›×”</h3>
        <div class="video-box"><iframe id="rVideo" allowfullscreen></iframe></div>
        <div style="margin-top:20px;">
            <h3>×“×’×©×™× ×•×‘×•× ×•×¡×™×</h3>
            <ul id="rBullets" style="padding-right:20px; line-height:1.6;"></ul>
        </div>
    </div>

    <div class="card">
        <h3 style="text-align:center; border-bottom:1px solid #eee; padding-bottom:10px;">××‘× ×” ×”×¢×¥ (×¡×™××•×œ×¦×™×”)</h3>
        <div id="mathBox" class="math-summary"></div>
        <div id="treeArea" class="tree-container"></div>
    </div>
</div>

<script>
    // --- ×”× ×ª×•× ×™× ×”××“×•×™×§×™× (HARDCODED) ---
    const RANKS = {
        // Sales Coordinator: ×©×—×–×•×¨ ××“×•×™×§ 1:1 ×œ×ª××•× ×” (7 ×¨×’×œ×™×™×, 28,100 × ×§×•×“×•×ª)
        "sc": {
            title: "Sales Coordinator (SC)",
            target: 28000,
            intro: "×“×¨×’×ª ×× ×”×™×’×•×ª. × ×™×”×•×œ ×¦×•×•×ª ×¨×—×‘.",
            video: "cyJb_ecWjyA",
            bullets: [
                "×™×¢×“: 28,000 × ×§×•×“×•×ª.",
                "×‘×•× ×•×¡: 3,600 â‚ª (×—×œ×•×§×”: 1,200 + 2,400).",
                "×“×¨×™×©×”: ××‘× ×” PB (×–×›×™×™×Ÿ ××—×“ P+).",
                "×¢××œ×”: 22%."
            ],
            // ××‘× ×” ×”×¢×¥ ×”××“×•×™×§
            tree: {
                nodes: [
                    // ×¨××” 0: ××ª×”
                    { id: "me", code: "SC", pv: 1245, col: 3.5, row: 0, type: "me" },
                    
                    // ×¨××” 1: 7 ×¨×’×œ×™×™×
                    { id: "l1", code: "P", pv: 2561, col: 0, row: 1 },
                    { id: "l2", code: "P+", pv: 4300, col: 1, row: 1 }, // PB
                    { id: "l3", code: "P", pv: 930, col: 2, row: 1 },
                    { id: "l4", code: "P", pv: 2561, col: 3, row: 1 },
                    { id: "l5", code: "P", pv: 2561, col: 4, row: 1 },
                    { id: "l6", code: "Client", pv: 1631, col: 5, row: 1 },
                    { id: "l7", code: "Client", pv: 2561, col: 6, row: 1 },

                    // ×¨××” 2: ×™×œ×“×™×
                    { id: "c4", code: "P", pv: 2561, col: 3, row: 2 }, // ×™×œ×“ ×©×œ 4
                    { id: "c5", code: "P", pv: 2561, col: 4, row: 2 }, // ×™×œ×“ ×©×œ 5
                    { id: "c7", code: "Client", pv: 436, col: 6, row: 2 }, // ×™×œ×“ ×©×œ 7

                    // ×¨××” 3: × ×›×“
                    { id: "g7", code: "P", pv: 2561, col: 6, row: 3 } // × ×›×“ ×©×œ 7
                ],
                edges: [
                    {s:"me",t:"l1"}, {s:"me",t:"l2"}, {s:"me",t:"l3"}, {s:"me",t:"l4"}, {s:"me",t:"l5"}, {s:"me",t:"l6"}, {s:"me",t:"l7"},
                    {s:"l4",t:"c4"}, {s:"l5",t:"c5"}, {s:"l7",t:"c7"},
                    {s:"c7",t:"g7"}
                ]
            }
        },
        // Partner Plus: ×©×—×–×•×¨ ××“×•×™×§ (4,576 × ×§×•×“×•×ª)
        "pp": {
            title: "Partner Plus (P+)",
            target: 4000,
            intro: "×”×ª×§×“××•×ª ×¨××©×•× ×”.",
            video: "M293NdN7Sok",
            bullets: ["×™×¢×“: 4,000 × ×§×•×“×•×ª.", "×‘×•× ×•×¡: 400 â‚ª.", "×¢××œ×”: 14%."],
            tree: {
                nodes: [
                    { id: "me", code: "P+", pv: 866, col: 1, row: 0, type: "me" },
                    { id: "l", code: "P", pv: 283, col: 0, row: 1 },
                    { id: "m", code: "P", pv: 2561, col: 1, row: 1 },
                    { id: "r", code: "P", pv: 866, col: 2, row: 1 }
                ],
                edges: [{s:"me",t:"l"}, {s:"me",t:"m"}, {s:"me",t:"r"}]
            }
        },
        // Senior Partner
        "sp": {
            title: "Senior Partner (SP)",
            target: 12000,
            intro: "×‘× ×™×™×ª ×™×¦×™×‘×•×ª.",
            video: "fnG6Eld0SPk",
            bullets: ["×™×¢×“: 12,000 × ×§×•×“×•×ª.", "×‘×•× ×•×¡: 1,200 â‚ª."],
            tree: {
                nodes: [
                    { id: "me", code: "SP", pv: 2561, col: 2, row: 0, type: "me" },
                    { id: "l1", code: "P", pv: 4192, col: 0, row: 1 },
                    { id: "l2", code: "Client", pv: 2561, col: 2, row: 1 },
                    { id
